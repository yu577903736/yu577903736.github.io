<!DOCTYPE html>
<html>

<head>
	<title>Tuxedo Cat Coffee</title>
	<link type="text/css" rel="stylesheet" href="cafe.css">
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>

<body>
	<header>
		<img src="images/logo.png" alt="Tuxedo Cat Coffee" />
	</header>
	<main>
		<form id="order_form" name="order_form" action="checkout.html" method="get">
			<section id="menu">
				<h2>Menu</h2>
				<p>Click an item to add it to your order.</p>
				<ul>
					<div class="flipper">
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/espresso_info.jpg"
									alt="$1.95 - espresso" /></a></li>
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/espresso.jpg"
									alt="$1.95 - espresso" /></a></li>
					</div>
					<div class="flipper">

						<li><a href="#"><img id="images/espresso_info.jpg" src="images/latte_info.jpg"
									alt="$2.95 - latte" /></a></li>
						<li><a href="#"><img id="images/latte_info.jpg" src="images/latte.jpg"
									alt="$2.95 - latte" /></a></li>
					</div>
					<div class="flipper">
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/cappuccino_info.jpg"
									alt="$3.45 - cappuccino" /></a></li>
						<li><a href="#"><img id="images/cappuccino_info.jpg" src="images/cappuccino.jpg"
									alt="$3.45 - cappuccino" /></a></li>
					</div>
					<div class="flipper">
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/coffee_info.jpg"
									alt="$1.75 - coffee" /></a></li>
						<li><a href="#"><img id="images/coffee_info.jpg" src="images/coffee.jpg"
									alt="$1.75 - coffee" /></a>
						</li>
					</div>
					<div class="flipper">
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/biscotti_info.jpg"
									alt="$1.95 - biscotti" /></a></li>
						<li><a href="#"><img id="images/biscotti_info.jpg" src="images/biscotti.jpg"
									alt="$1.95 - biscotti" /></a></li>
					</div>
					<div class="flipper">
						<li><a href="#"><img id="images/espresso_info.jpg" src="images/scone_info.jpg"
									alt="$2.95 - scone" /></a></li>
						<li><a href="#"><img id="images/scone_info.jpg" src="images/scone.jpg"
									alt="$2.95 - scone" /></a></li>
					</div>
				</ul>
			</section>

			<section>
				<h2>Your Order</h2>
				<section>
					<select id="order" name="order" size="6">
					</select>
					<p id="total">&nbsp;</p>
				</section>
				<section id="buttons">
					<input type="button" name="place_order" id="place_order" value="Place Order">
					<input type="button" name="clear_order" id="clear_order" value="Clear Order">
				</section>
			</section>



		</form>
	</main>
</body>
<script src="./jquery-3.5.1.min.js"></script>
<script>
	function loadImg(imgSrc) {
		console.log('图片加载中，请稍后');
		var oImg = new Image();
		oImg.onload = function () {
			console.log('图片预加载完成'); //img 也有onload、onerror属性
		}
		oImg.onerror = function () {
			console.log('加载失败');
		}
		oImg.src = imgSrc;
	}
	$(function () {
		loadImg("./images/biscotti_info.jpg");
		loadImg("./images/cappuccino_info.jpg");
		loadImg("./images/coffee_info.jpg");
		loadImg("./images/espresso_info.jpg");
		loadImg("./images/latte_info.jpg");
		loadImg("./images/scone_info.jpg");
		$(".flipper").hover(function () {
			$(this).css("transform", "rotateY(180deg)");
			$(this).children("li")[1].style.display = 'none';
			$(this).children("li")[0].style.display = 'block';
		}, function () {
			$(this).css("transform", "rotateY(0deg)");
			$(this).children("li")[0].style.display = 'none';
			$(this).children("li")[1].style.display = 'block';
		});
		$(".flipper").click(function () {
			var text = $(this).find("img").eq(0).attr("alt");
			$("#order").append('<option value = "'+text+'" > '+text+' </option>');
			var total=0;
			$("#order").children("option").each((index,item,arr)=>{
				total+=parseFloat($(item).val().slice(1,5));
			});
			$("#total").text(total)
		});
		$("#place_order").click(()=>{
			window.location="./checkout.html";
		});
		$("#clear_order").click(()=>{
			$("#order").empty();
			$("#total").text("");
		});
	});
</script>

</html>